<div class="container">
    <button routerLink="/purchase-orders" class="btn btn-secondary mt-3">
        Volver a Ordenes de Compra
    </button>

    <h1 class="mt-4 mb-4">Creando Orden de Compra</h1>

    <section *ngIf="!existsSuppliers">
        <h2>No hay proveedores para realizar una Orden de compra</h2>
        <p>Para ingresar una orden de compra debe tener proveedores en el sistema</p>
        <button routerLink="/suppliers/create">
            Ir a ingresar un nuevo proveedor
        </button>
    </section>
    <!-- primero pregunto por el proveedor -->

    <section *ngIf="existsSuppliers && !supplierInserted">
        <form [formGroup]="supplierForm" (ngSubmit)="submitSupplier(supplierForm)">
            <div class="mt-3" *ngIf="!supplierInserted">
                <label for="supplierInput" class="form-label">Proveedor</label>
                <select id="supplierInput" class="form-select" aria-label="Default select example" 
                name="supplier" [(ngModel)]="supplierCode" formControlName="supplier"> 
                  <option option *ngFor="let supplier of suppliers" value= {{supplier.code}} >
                    {{ supplier.businessName }}
                  </option>
                </select>
                <div *ngIf="supplierForm.get('supplier')?.invalid && supplierForm.get('supplier')?.touched" 
                class="fw-lighter text-danger">
                  Debe ingresar un proveedor
                </div>
              </div>

            <button type="submit" [disabled]="supplierForm.invalid" class="btn btn-primary mt-4">
                Verificar
            </button>
        </form>
    </section>

    <!-- Despues le pido que ingrese los productos que quiera hasta que aprete el boton siguiente 
     De un lado se ven los productos para agregar
     del otro lado se ven los productos que se van agregando 
     (estos se pueden eliminar o modificar la cantidad)
    -->
    <section *ngIf="supplierInserted">
        <div class="row">
            <div class="col-md-6">
                <h3>Agregar Productos</h3>
                <form [formGroup]="addProductForm" (ngSubmit)="submitaddproduct(submitForm)">
                </form>
            </div>
            <div class="col-md-6">
                <h3>Productos agregados</h3>
                <article *ngIf="productsPurchase.length === 0">
                    <p>No hay productos</p>
                </article>
            </div>
          </div>
    </section>

    <!-- Ingreso la informacion de la orden de compra
    informacion de entrega
    fecha de emision
    fecha de entrega
 -->

    <!-- Muestro toda la orden de compra para confirmarla -->
</div>