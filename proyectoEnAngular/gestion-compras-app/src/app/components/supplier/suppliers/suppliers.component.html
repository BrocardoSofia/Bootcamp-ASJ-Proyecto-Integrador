<div class="container">
  <section class="m-0 d-flex title">
    <div class="col-md-10 ps-0 ">
      <div style="display: flex; align-content: center;">
        <h1 class="pt-4 pb-2 text-center " style="margin-left: 10px; color:#2f2f2f;">
          <img src="/assets/person-badge-fill.svg" alt="icono user" class="icono">
          Proveedores</h1>
      </div>
    </div>
    <div class="col-md-2">
      <div class="input-group justify-content-end input-group-append pt-2 ">
        <button type="button" class="btn btn-outline-primary ml-auto" routerLink="./new">
          <i class="bi bi-person-fill-add"></i>
          Nuevo proveedor
        </button>
      </div>
    </div>
  </section>

  <table class="table mt-3 mb-0 pb-4 table-radius">
    <thead>
      <tr class="table-secondary">
        <th scope="col">Código</th>
        <th scope="col">Razón social</th>
        <th scope="col">Rubro</th>
        <th scope="col">Web/email/telefono</th>
        <th scope="col">Nombre</th>
        <th scope="col">Apellido</th>
        <th scope="col">Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let supplier of suppliers; index as i">
        <td>{{ supplier.supplierCode }}</td>
        <td>{{ supplier.businessName }}</td>
        <td>{{ supplier.supplierCategory.category }}</td>
        <td>
          <p><strong>Web:</strong> {{ supplier.businessWebpage }}</p>
          <p><strong>Email:</strong> {{ supplier.businessEmail}}</p>
          <p><strong>Telefono:</strong> {{ supplier.businessPhone }}</p>
        </td>
        <td>
          <p>{{ supplier.supplierContacts[0].contactName  }}</p>
        </td>
        <td>
          <p>{{ supplier.supplierContacts[0].contactName }}</p>
        </td>
        <td>
          <button
            type="button"
            class="btn btn-primary rounded-circle btn-icon me-3"
            [routerLink]="['./edit']"
            [queryParams]="{ supplier: supplier.id }"
          >
            <i class="bi bi-pencil-fill"></i>
          </button>

          <button
            type="button"
            class="btn btn-danger rounded-circle btn-icon"
            (click)="setToDeleteSupplier(supplier)"
            data-bs-toggle="modal"
            data-bs-target="#exampleModal"
          >
            <i class="bi bi-trash3-fill"></i>
          </button>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<!-- Modal -->
<div
  class="modal fade"
  id="exampleModal"
  tabindex="-1"
  aria-labelledby="exampleModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title fs-5" id="exampleModalLabel">
          Eliminando proveedor
        </h2>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        ¿Esta seguro que desea eliminar al proveedor
        {{ toDeleteSupplier.businessName }} ?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          Volver
        </button>
        <button
          type="button"
          class="btn btn-danger"
          (click)="deleteSupplier()"
          data-bs-dismiss="modal"
        >
          Eliminar
        </button>
      </div>
    </div>
  </div>
</div>
